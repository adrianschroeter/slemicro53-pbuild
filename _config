# Avoid -mini packages as they are not supposed to be part of the image
Prefer: libudev udev systemd
Prefer: !libudev-mini1 !udev-mini !systemd-mini !libsystemd0-mini
Prefer: -ghc-bootstrap

# workaround for incomplete 15.4 shipment
Support: !rpmlint-Factory

Support: vim less strace

# cross architecture build settings
%if "%_repository" == "cross_aarch64"
HostArch: x86_64
Target: aarch64-suse-linux

# our basic cross tool chain
Required: cross-aarch64-gcc11
Required: cross-aarch64-glibc
Required: cross-aarch64-aaa_base
OnlyNative: cross-aarch64-gcc11
OnlyNative: cross-aarch64-aaa_base
OnlyNative: makeinfo

AlsoNative: qt6-base-common-devel
AlsoNative: qt6-base-devel
AlsoNative: qt6-base-private-devel
AlsoNative: qt6-tools
AlsoNative: qt6-tools-devel

# temporary workaround to break cycle dep due to wrong provides
Preinstall: update-alternatives
Order: update-alternatives:cross-aarch64-gcc11

Ignore: libncurses6:cross-aarch64-gcc11
Ignore: cross-aarch64-gcc11:libncurses6

# 15.3 dropped these packages temporary
Ignore: rpmlint-mini rpmlint-Factory

# the checks are mostly not valid for cross build
Support: !brp-check-suse
Support: !post-build-checks

# cross compiler and helper tooling
#Required: cross-aarch64-aaa_base
#Required: cross-aarch64-gcc11
OnlyNative: cross-aarch64-aaa_base
OnlyNative: cross-aarch64-gcc11

Substitute: system-packages:kiwi-image python3-kiwi createrepo_c tar qemu-linux-user qemu-tools gptfdisk kpartx dosfstools python3-kiwi_crossprepare_plugin build-initvm-x86_64
%endif
